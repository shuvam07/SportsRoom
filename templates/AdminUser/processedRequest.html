{% extends 'MasterLayout/baseLayout.html' %}

{% block body %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
      $("#myInput").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#myTable tr").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });
    </script>


  <div class="container">
    <br>
    <h2>Search Request</h2>
    <p>Type key words in the input field to search the List</p>  
    <input id="myInput" type="text" placeholder="Search..">
    <br><br>

    <table class="table table-hover">
    <thead>
      <tr>
        <th>Request No</th>
        <th>Equipment</th>
        <th>Quantity</th>
        <th>Username</th>
        <th>Date of Request</th>
        <th>Date of Approval</th>
        <th>Expected Return Date</th>
        <th></th>
      </tr>
    </thead>

    <tbody id="myTable">

      {% for processedRequest in lstProcessedRequest %}

      <tr>
        <td>{{ processedRequest.reqId }}
        <td>{{ processedRequest.eqp.eqpName }}</td>
        <td>{{ processedRequest.quantity }} </td>
        <td>{{ processedRequest.user.username }}</td>
        <td>{{ processedRequest.dtOfRequest.date }}</td>
        <td>{{ processedRequest.dtAvailed.date }}</td>
        <td>{{ processedRequest.dtOfExpRet.date }}</td>

        <td>
            {% if processedRequest.reqStatus == 1 %}
                <a href="#" class="btn btn-success btn-sm" role="button" aria-pressed="true" > Approved </a>
                <a href="{% url 'sportsEquipment:processReturnRequest' %}?reqId={{ processedRequest.reqId }}" class="btn btn-primary btn-sm" role="button" aria-pressed="true" > Return</a>

            {% elif processedRequest.reqStatus == 2%}
                <a href="#" class="btn btn-danger btn-sm" role="button" aria-pressed="true" > Rejected </a>

            {% else %}
                <a href="#" class="btn btn-secondary btn-sm" role="button" aria-pressed="true" > Returned </a>
            {% endif %}
        </td>


      </tr>

      {% endfor %}
    </tbody>
  </table>


  </div>

{% endblock %}